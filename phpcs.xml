<?xml version="1.0"?>
<ruleset name="ACF Service Management Suite">
	<description>Custom WordPress Coding Standards for ACF Service Management Suite</description>

	<!-- What to scan -->
	<file>.</file>
	
	<!-- Exclude patterns -->
	<exclude-pattern>*/vendor/*</exclude-pattern>
	<exclude-pattern>*/workspace/*</exclude-pattern>
	<exclude-pattern>*/node_modules/*</exclude-pattern>
	<exclude-pattern>*.js</exclude-pattern>
	<exclude-pattern>*.css</exclude-pattern>

	<!-- How to scan -->
	<arg value="sp"/> <!-- Show sniff and progress -->
	<arg name="basepath" value="."/><!-- Strip the file paths down to the relevant bit -->
	<arg name="colors"/>
	<arg name="extensions" value="php"/>
	<arg name="parallel" value="8"/><!-- Enables parallel processing when available for faster results -->

	<!-- Rules: WordPress Coding Standards -->
	<rule ref="WordPress">
		<!-- Allow short array syntax -->
		<exclude name="Generic.Arrays.DisallowShortArraySyntax"/>
		
		<!-- File naming - we use simpler class file names -->
		<exclude name="WordPress.Files.FileName.InvalidClassFileName"/>
		<exclude name="WordPress.Files.FileName.NotHyphenatedLowercase"/>
		
		<!-- Allow multiple OO structures in main plugin file -->
		<exclude name="PSR1.Files.SideEffects"/>
		
		<!-- Yoda conditions are optional -->
		<exclude name="WordPress.PHP.YodaConditions.NotYoda"/>
		
		<!-- Array alignment is optional (too strict) -->
		<exclude name="WordPress.Arrays.MultipleStatementAlignment"/>
		<exclude name="WordPress.WhiteSpace.OperatorSpacing"/>
		
		<!-- Reserved keywords as parameters (ACF uses these) -->
		<exclude name="WordPress.NamingConventions.ValidFunctionName.FunctionNameInvalid"/>
		
		<!-- Precision alignment -->
		<exclude name="WordPress.WhiteSpace.PrecisionAlignment"/>
		
		<!-- Comment formatting -->
		<exclude name="Squiz.Commenting.InlineComment.InvalidEndChar"/>
		
		<!-- Meta queries are sometimes necessary -->
		<exclude name="WordPress.DB.SlowDBQuery.slow_db_query_meta_query"/>
	</rule>

	<!-- Check for PHP cross-version compatibility -->
	<config name="testVersion" value="7.4-"/>
	
	<!-- Allow error_log for debugging when WP_DEBUG is active -->
	<rule ref="WordPress.PHP.DevelopmentFunctions">
		<properties>
			<property name="exclude" type="array">
				<element value="error_log"/>
			</property>
		</properties>
	</rule>

	<!-- Enforce text domain -->
	<rule ref="WordPress.WP.I18n">
		<properties>
			<property name="text_domain" type="array">
				<element value="acf-sms"/>
			</property>
		</properties>
	</rule>

	<!-- Minimum PHP version -->
	<config name="minimum_supported_wp_version" value="5.8"/>
</ruleset>
